{% extends "base.html" %}

{% block title %}–ò–≥—Ä–∞ - –ê—É–∫—Ü–∏–æ–Ω –¶–≤–µ—Ç–æ–≤ Golan{% endblock %}

{% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–≥—Ä—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
<div class="card text-center mb-6">
    <h1 class="text-2xl font-bold mb-6">
        üéÆ –ì–æ–ª–ª–∞–Ω–¥—Å–∫–∏–π –ê—É–∫—Ü–∏–æ–Ω –¶–≤–µ—Ç–æ–≤
    </h1>
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
        <button id="startGame" class="btn btn-success">
            ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        </button>
        <button id="nextRound" class="btn btn-primary" disabled>
            ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥
        </button>
        <button id="resetGame" class="btn btn-warning">
            üîÑ –°–±—Ä–æ—Å–∏—Ç—å
        </button>
    </div>
</div>

<!-- –°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã -->
<div class="card text-center mb-6">
    <h3 class="text-lg font-semibold mb-4">–°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã</h3>
    <div id="gameStatus" class="text-green-600 font-semibold mb-2">–û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞</div>
    <div id="gameRound" class="text-gray-600">–†–∞—É–Ω–¥: 0</div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–≥—Ä—ã -->
<div class="grid grid-2 mb-6">
    <!-- –°–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="card">
        <h2 class="text-lg font-semibold mb-4">
            üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å
        </h2>
        <div id="userInfo" class="user-info">
            <p class="text-center text-gray-600">–ù–∞—á–Ω–∏—Ç–µ –∏–≥—Ä—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å</p>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ª–æ—Ç–∞ -->
    <div class="card">
        <h2 class="text-lg font-semibold mb-4">
            üíé –¢–µ–∫—É—â–∏–π –ª–æ—Ç
        </h2>
        <div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
            <p class="text-sm text-blue-800">
                <strong>üí° –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–±—ã–ª—å:</strong><br>
                –ü—Ä–∏–±—ã–ª—å = –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ √ó 1.3 (130%)<br>
                –ü—Ä–∏–º–µ—Ä: –∫—É–ø–∏–ª –∑–∞ 10,000 ‚ÇΩ ‚Üí –ø—Ä–∏–±—ã–ª—å 13,000 ‚ÇΩ!
            </p>
        </div>
        <div id="currentLot" class="lot-card">
            <p class="text-center text-gray-600">–¶–µ–Ω–∞ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ –Ω–µ –∫—É–ø–∏—Ç!</p>
        </div>
    </div>
</div>

<!-- –°–µ–∫—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
<div class="card mb-6">
    <h2 class="text-lg font-semibold mb-4">
        üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—É–Ω–¥–∞
    </h2>
    <div id="auctionResult" class="result-card">
        <p class="text-center text-gray-600">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–æ—Ä–≥–æ–≤ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
    </div>
</div>

<!-- –°–µ–∫—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ -->
<div class="card">
    <h2 class="text-lg font-semibold mb-4">
        üë• –ò–≥—Ä–æ–∫–∏
    </h2>
    <div id="playersList" class="players-grid grid grid-3">
        <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ -->
<div id="loadingModal" class="modal hidden">
    <div class="modal-content">
        <div class="loading-spinner">
            ‚è≥
        </div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>
</div>

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
<div id="notifications" class="notifications-container"></div>

<!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä—ã -->
<style>
    .modal {
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .modal-content {
        background: white;
        padding: 2rem;
        border-radius: 0.75rem;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        max-width: 300px;
        width: 90%;
    }
    
    .loading-spinner {
        font-size: 2rem;
        margin-bottom: 1rem;
    }
    
    .notifications-container {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1001;
    }
    
    .notification {
        background: white;
        padding: 1rem;
        border-radius: 0.5rem;
        margin-bottom: 0.5rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        border-left: 4px solid #10b981;
        max-width: 300px;
        animation: slideIn 0.3s ease-out;
    }
    
    .notification.error {
        border-left-color: #ef4444;
    }
    
    .notification.warning {
        border-left-color: #f59e0b;
    }
    
    .notification.info {
        border-left-color: #3b82f6;
    }
    
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    .player-card {
        background: #f8fafc;
        padding: 1rem;
        border-radius: 0.5rem;
        border: 1px solid #e2e8f0;
        text-align: center;
        transition: all 0.2s;
    }
    
    .player-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .player-card.user {
        border: 2px solid #10b981;
        background: #f0fdf4;
    }
    
    .player-avatar {
        width: 40px;
        height: 40px;
        background: #3b82f6;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.5rem;
        font-weight: 600;
        color: white;
        font-size: 1rem;
    }
    
    .player-name {
        font-weight: 600;
        margin-bottom: 0.25rem;
        color: #1a202c;
    }
    
    .player-balance {
        color: #10b981;
        font-weight: 600;
        margin-bottom: 0.25rem;
    }
    
    .player-profit {
        color: #3b82f6;
        font-size: 0.875rem;
    }
    
    .player-purchases {
        color: #f59e0b;
        font-size: 0.875rem;
    }
    
    .lot-info {
        background: #f8fafc;
        padding: 1.5rem;
        border-radius: 0.5rem;
        border: 1px solid #e2e8f0;
    }
    
    .lot-details {
        display: grid;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
    }
    
    .lot-detail-item {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0.75rem;
        background: white;
        border-radius: 0.375rem;
        border: 1px solid #e2e8f0;
    }
    
    .user-actions {
        text-align: center;
    }
    
    .buy-button {
        background: #10b981;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 160px;
    }
    
    .buy-button:hover {
        background: #059669;
    }
    
    .buy-button:disabled {
        background: #d1d5db;
        cursor: not-allowed;
    }
    
    .result-card {
        background: #f8fafc;
        padding: 1.5rem;
        border-radius: 0.5rem;
        border: 1px solid #e2e8f0;
        text-align: center;
    }
    
    .winner-info {
        color: #10b981;
        font-weight: 600;
        margin-bottom: 1rem;
    }
    
    .purchase-details {
        display: grid;
        gap: 0.5rem;
        text-align: left;
        max-width: 300px;
        margin: 0 auto;
    }
    
    .purchase-detail-item {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0.75rem;
        background: white;
        border-radius: 0.375rem;
        border: 1px solid #e2e8f0;
    }
    
    @media (max-width: 768px) {
        .grid-2 {
            grid-template-columns: 1fr;
        }
        
        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }
        
        .notifications-container {
            left: 1rem;
            right: 1rem;
        }
        
        .notification {
            max-width: none;
        }
    }
</style>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}
