#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
üöÄ –ó–ê–ü–£–°–ö–ê–¢–ï–õ–¨ –ì–û–õ–õ–ê–ù–î–°–ö–û–ì–û –ê–£–ö–¶–ò–û–ù–ê GOLAN üöÄ

–ê–≤—Ç–æ—Ä: Golan Auction Team
–í–µ—Ä—Å–∏—è: 2.0
–û–ø–∏—Å–∞–Ω–∏–µ: –£–º–Ω—ã–π –∑–∞–ø—É—Å–∫–∞—Ç–µ–ª—å –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞—É–∫—Ü–∏–æ–Ω–∞
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Flask
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
- –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ (–æ–¥–∏–Ω –∫–ª–∏–∫)
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å
"""

import os
import sys
import subprocess
import webbrowser
import time
import threading

def check_flask():
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Flask
    
    Returns:
        bool: True –µ—Å–ª–∏ Flask —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, False –µ—Å–ª–∏ –Ω–µ—Ç
    """
    try:
        import flask
        return True
    except ImportError:
        return False

def install_flask():
    """
    –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Flask —á–µ—Ä–µ–∑ pip
    
    Returns:
        bool: True –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω–∞, False –µ—Å–ª–∏ –æ—à–∏–±–∫–∞
    """
    print("üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é Flask...")
    try:
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Flask —á–µ—Ä–µ–∑ pip
        subprocess.check_call([sys.executable, "-m", "pip", "install", "flask"])
        print("‚úÖ Flask —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
        return True
    except subprocess.CalledProcessError:
        print("‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Flask")
        return False

def open_browser():
    """
    –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    –î–∞–µ—Ç –≤—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä—É –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
    """
    time.sleep(3)  # –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
    webbrowser.open("http://localhost:5000")  # –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ

def main():
    """
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞—Ç–µ–ª—è
    
    –í—ã–ø–æ–ª–Ω—è–µ—Ç:
    1. –ü—Ä–æ–≤–µ—Ä–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Flask
    2. –£—Å—Ç–∞–Ω–æ–≤–∫—É Flask –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    3. –ó–∞–ø—É—Å–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
    """
    print("=" * 60)
    print("üî• –ì–û–õ–õ–ê–ù–î–°–ö–ò–ô –ê–£–ö–¶–ò–û–ù GOLAN üî•")
    print("=" * 60)
    print()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º Flask
    if not check_flask():
        print("‚ö†Ô∏è  Flask –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
        if not install_flask():
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Flask")
            input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")
            return
    
    print("üöÄ –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...")
    print("üì± –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã")
    print("‚èπÔ∏è  –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –æ–∫–Ω–æ")
    print()
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –±—Ä–∞—É–∑–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ (–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
    browser_thread = threading.Thread(target=open_browser)
    browser_thread.daemon = True  # –ü–æ—Ç–æ–∫ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
    browser_thread.start()
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º app.py –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏
        subprocess.run([sys.executable, "app.py"])
    except KeyboardInterrupt:
        print("\nüëã –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        input("–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞...")

if __name__ == '__main__':
    main()
